import Highcharts from "highcharts";
import { PlotData } from "./Plot.types";
import { formatDate } from "./Plot.utils";

export type ITypeChart = "line" | "bar" | "scatter";

export interface StatusValue {
  value: number;
  label: string;
}

export interface YAxisLabel {
  label: string;
  enumLabel: string[];
}

export interface OnlineOfflineChartProps {
  containerId: string;
}

export const APP_BAR_HEIGHT = 49;

export const DEFAULT_CHART_COLOR = [
  "#5470c6",
  "#91cc75",
  "#fac858",
  "#ee6666",
  "#73c0de",
  "#3ba272",
  "#fc8452",
  "#9a60b4",
  "#ea7ccc",
];

export const DATE_FORMAT = "YYYY-MM-DD";
export const TIME_FORMAT = "HH:mm:ss";
export const HOUR_MINUTE_FORMAT = "HH:mm";
export const DATE_TIME_FORMAT = `${DATE_FORMAT} ${TIME_FORMAT}`;
export const SEMI_TRANSPARENT = "rgba(128, 128, 128, 0.5)";

// TODO(minh.tran): Remove callback function in getDefaultOption. Need to refactor other components to use this function
export const getDefaultOption = (): Highcharts.Options => ({
  chart: {
    marginTop: 16,
  },
  credits: {
    enabled: false,
  },
  rangeSelector: {
    selected: 1,
    enabled: false,
  },
  navigator: {
    enabled: false,
  },
  tooltip: {
    enabled: true,
    shared: true,
    useHTML: true,
    backgroundColor: "#ffffff",
    formatter: function () {
      let tooltipContent = `<b>${formatDate(this.x as number)}</b><br>`;
      this.points?.forEach((point) => {
        // Tooltip is only displayed for series that are not arearange(max min value)
        if (point.series.userOptions.type !== "arearange") {
          tooltipContent += `<span style="color:${point.color}">\u25CF</span> ${point.series.name}: <b>${point.y}</b><br>`;
        }
      });

      return tooltipContent;
    },
  },
  // legend: { enabled: false },
  legend: {
    layout: "vertical",
    align: "right",
    verticalAlign: "middle",
  },
  series: [],
  xAxis: {
    crosshair: {
      color: "red",
      dashStyle: "Dash",
      zIndex: 5,
    },
  },
  yAxis: {
    crosshair: {
      width: 1,
      color: "green",
      dashStyle: "Dash",
      zIndex: 5,
      label: {
        enabled: true,
      },
    },
  },
  exporting: {
    buttons: {
      contextButton: {
        enabled: false,
      },
    },
    showTable: true,
  },
  plotOptions: {},
});

export const FAKE_DATA: PlotData = [
  {
    id: "2569b2d9-382d-4222-a415-7d50068889e5",
    name: "/etc/resolv.conf Disk Usage",
    dataType: "number",
    dataUnit: "%",
    data: [
      [1672531200000, 53],
      [1672617600000, 61],
      // [1672704000000, 70],
      // [1672790400000, 79],
      [1672876800000, 87],
      [1672963200000, 96],
      [1673049600000, 4],
      [1673136000000, 13],
      [1673222400000, 22],
      [1673308800000, 30],
      //
      [1677657600000, 76],
      [1677744000000, 40],
      [1677830400000, 4],
      [1677916800000, 68],
      [1678003200000, 32],
      [1678089600000, 96],
      [1678176000000, 60],
      [1678262400000, 24],
      [1678348800000, 88],
      [1678435200000, 52],
      //
      [1680336000000, 60],
      [1680422400000, 24],
      [1680508800000, 88],
      [1680595200000, 52],
      [1680681600000, 16],
      [1680768000000, 80],
      [1680854400000, 44],
      [1680940800000, 8],
      [1681027200000, 72],
      [1681113600000, 36],
    ],
  },
  {
    id: "8035cc34-b949-4b6b-836b-6d5c1b7cf1ba",
    name: "/tmp/balena Disk Usage",
    dataType: "number",
    dataUnit: "%",
    data: [
      [1672531200000, 23],
      [1672617600000, 20],
      [1672704000000, 70],
      [1672790400000, 79],
      [1672876800000, 87],
      [1672963200000, 60],
      [1673049600000, 46],
      [1673136000000, 13],
      [1673222400000, 22],
      [1673308800000, 30],
      [1673395200000, 39],
      [1673481600000, 48],
      [1673568000000, 56],
      [1673654400000, 65],
      [1673740800000, 74],
      [1673827200000, 82],
      [1673913600000, 91],
      [1674000000000, 12],
      [1674086400000, 18],
      [1674172800000, 17],
      [1674259200000, 25],
      [1674345600000, 34],
      [1674432000000, 43],
      [1674518400000, 51],
      [1674604800000, 60],
      [1674691200000, 69],
      [1674777600000, 77],
      [1674864000000, 86],
      [1674950400000, 80],
      [1675036800000, 35],
    ],
    dataRange: [
      [1672531200000, 20, 90],
      [1672617600000, 31, 90],
      [1672704000000, 40, 90],
      [1672790400000, 49, 90],
      [1672876800000, 67, 93],
      [1672963200000, 46, 100],
      [1673049600000, 2, 92],
      [1673136000000, 1, 90],
      [1673222400000, 14, 90],
      [1673308800000, 21, 90],
      [1673395200000, 34, 90],
      [1673481600000, 28, 90],
      [1673568000000, 16, 90],
      [1673654400000, 35, 90],
      [1673740800000, 44, 90],
      [1673827200000, 42, 90],
      [1673913600000, 61, 97],
      [1674000000000, 0, 90],
      [1674086400000, 5, 90],
      [1674172800000, 7, 90],
      [1674259200000, 15, 90],
      [1674345600000, 24, 90],
      [1674432000000, 33, 90],
      [1674518400000, 11, 90],
      [1674604800000, 50, 90],
      [1674691200000, 39, 90],
      [1674777600000, 17, 90],
      [1674864000000, 36, 97],
      [1674950400000, 15, 99],
      [1675036800000, 2, 98],
    ],
  },
  {
    id: "c68af11f-e5af-481b-9704-2da48deb52fd",
    name: "CPU Usage",
    dataType: "number",
    dataUnit: "",
    data: [
      [1705398124738, 2],
      [1705479470075, 4],
      [1705479470077, 4],
      [1705480735000, 5],
      [1705483057253, 7],
      [1705483057255, 9],
      [1705483172431, 10],
      [1705483172434, 13],
      [1705483173404, 14],
      [1705483173407, 15],
      [1705486048867, 18],
      [1705486048869, 20],
      [1705543344207, 21],
      [1705543344209, 27],
      [1705543448566, 30],
      [1705543448567, 35],
      [1705543449516, 36],
      [1705543449517, 36],
      [1705558495000, 40],
    ],
  },
  {
    id: "a42f3afe-bad3-47e3-875d-3af7335f1324",
    name: "Memory Usage",
    dataType: "enum",
    dataUnit: "",
    data: [
      [1705398124738, 1],
      [1705479470075, 3],
      [1705479470077, 2],
      [1705480735000, 2],
      [1705483057253, 3],
      [1705483057255, 2],
      [1705483172431, 4],
      [1705483172434, 5],
      [1705483173404, 3],
      [1705483173407, 1],
      [1705486048867, 3],
      [1705486048869, 2],
      [1705543344207, 3],
      [1705543344209, 2],
      [1705543448566, 4],
      [1705543448567, 5],
      [1705543449516, 3],
      [1705543449517, 1],
      [1705558495000, 1],
    ],
    customUnit: {
      1: "Connected (session NOT present)",
      2: "Connected (session present)",
      3: "Connecting...",
      4: "An error occured",
      5: "Unexpected disconnect",
    },
  },
  {
    id: "e87effaf-e772-44cc-abf2-d000dc7f7155",
    name: "/ Disk Usage",
    dataType: "digital",
    dataUnit: "",
    data: [
      [1705398124738, 1],
      [1705479470075, 0],
      [1705479470077, 0],
      [1705480735000, 1],
      [1705483057253, 0],
      [1705483057255, 1],
      [1705483172431, 1],
      [1705483172434, 1],
      [1705483173404, 0],
      [1705483173407, 0],
      [1705486048867, 1],
      [1705486048869, 1],
      [1705543344207, 1],
      [1705543344209, 0],
      [1705543448566, 1],
      [1705543448567, 0],
      [1705543449516, 0],
      [1705543449517, 1],
      [1705558495000, 0],
    ],
    customUnit: {
      1: "ON",
      0: "OFF",
    },
  },

  // {
  //   id: "5",
  //   name: "ServerCpuUsage_Min",
  //   unit: "%",
  //   data: [
  //     [1705398124738, 3, "%"],
  //     [1705479470075, 4, "%"],
  //     [1705479470077, 5, "%"],
  //     [1705480735000, 6, "%"],
  //     [1705483057253, 8, "%"],
  //     [1705483057255, 1, "%"],
  //     [1705483172431, 4, "%"],
  //     [1705483172434, 8, "%"],
  //     [1705483173404, 4, "%"],
  //     [1705483173407, 3, "%"],
  //     [1705486048867, 1, "%"],
  //     [1705486048869, 2, "%"],
  //     [1705543344207, 3, "%"],
  //     [1705543344209, 2, "%"],
  //     [1705543448566, 7, "%"],
  //     [1705543448567, 4, "%"],
  //     [1705543449516, 9, "%"],
  //     [1705543449517, 2, "%"],
  //     [1705558495000, 5, "%"],
  //   ],
  // },
  // {
  //   id: "6",
  //   name: "ServerCpuUsage_Max",
  //   unit: "%",
  //   data: [
  //     [1705398124738, 5, "%"],
  //     [1705479470075, 6, "%"],
  //     [1705479470077, 7, "%"],
  //     [1705480735000, 8, "%"],
  //     [1705483057253, 10, "%"],
  //     [1705483057255, 3, "%"],
  //     [1705483172431, 6, "%"],
  //     [1705483172434, 10, "%"],
  //     [1705483173404, 6, "%"],
  //     [1705483173407, 5, "%"],
  //     [1705486048867, 3, "%"],
  //     [1705486048869, 4, "%"],
  //     [1705543344207, 5, "%"],
  //     [1705543344209, 4, "%"],
  //     [1705543448566, 9, "%"],
  //     [1705543448567, 6, "%"],
  //     [1705543449516, 11, "%"],
  //     [1705543449517, 4, "%"],
  //     [1705558495000, 7, "%"],
  //   ],
  // },
];
